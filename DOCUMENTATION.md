# Проектная работа "WEB-ларёк"

Реализация интернет-магазин с товарами для веб-разработчиков

- - Используемый стек: TypeScript, HTML, SCSS.

## Инструкция по сборке и запуску

- 1
- 2
- 3

```
npm install
npm run start
npm run build
```

## Архитектура

### Базовый код

---

1. Класс Name<T>

2. Класс Name<T>

### Компоненты модели данных (бизнес-логика)

---

1. Класс Name

2. Класс Name

### Компоненты представления

---

1. Класс Name

2. Класс Name

### Ключевые типы данных

---

```
// Все события в игре
enum Events {
  ORDER_CHANGED = 'order:changed', // что-то что-то  { ... }
  ORDER_CHANGED = 'order:changed', // что-то что-то  { ... }
  ORDER_CHANGED = 'order:changed', // что-то что-то  { ... }
};
```

### Размещение в сети

---

Прод. версия магазина доступна по адресу: https://....

// типы-интерфейсы, модель, слой отображения, Апи, презентер(обработчики событий)
// ['софт-скил', 'card__category_soft'],
['дополнительное', 'card__category_additional'],
['кнопка', 'card__category_button'],
['хард-скил', 'card__category_hard'],
['другое', 'card__category_other'],
//

---

/`Page`////////////

Class `Page` расширяет Базовый Class `Component<T>`
и реализует отображение главной страницы.
В конструкторе класс принимает 3 аргумента:

1. `container` - аргумент обязателен для класса родителя и принимает DOM-объект, узел тега `<body>`, использует классом родителем при ренедере узла, также может изспользоваться для быстрого поиска элементов внутри узла-контейнера. Имеет тип `HTMLElement`
2. `actions` - Используется для передачи события клика по корзине главной страницы, на которую установлен слушатель в `index.ts`. Имеет тип `IPageActions`
<!-- 2. `events` - принимает инстанс класса EventEmmiter для возможности эммита событий внутри Page.   -->

В классе используются сеттеры:

1. `catalog` - принимает массив Узлов типа HTMLElement и присваивает их главному узлу на странице для отображения списка полученных айтемов, используя встроенный метод API браузера `replaceChildren`.
2. `cartCounter` - принимает объект с алиасом `TUpdateCounter` для установки кол-ва добавленных айтемов в корзину пользователем.
3. `locked` - принимает true/false и необходим для вкл/выкл прокрутки страницы при открытии модального окна(корзины).

TYPES/INTERFACES

`interface IPage` нужен для передачи через дженерик родителю, для описания входящего параметра данных методу рендер родителя. С помощью данного метода в `index.ts` передается объект данного типа, для отображения актуальных данных полученных из модели.

`IPageActions` используется для типизации получаемого аргумента `actions`, описывает ключ и значение с передаваемым параметром при клике со встроенным типом `MouseEvent`.

`TUpdateCounter` тип описывающий передаваемый аргумент из модели при эмите события `cart:updateCounter` для отображения кол-ва добавленных айтемов в корзине на главной странице.

////////////`Page`/

---

/`Card`////////////
Class `Card` расширяет Базовый Class `Component<T>`
и реализует отображение компонента одной карты/айтема.
В конструкторе класс принимает 3 аргумента:

1. `container` - аргумент обязательный для класса родителя, который принимает DOM-объект, как узел тега с разметкой карты, получаемой из темплейта при помощи функции утилиты `cloneTemplate` из `utils.ts`. Используется для динамического поиска элементов внутри узла-контейнера и также классом родителем при рендере узла. Имеет тип `HTMLElement`.

2. `actions` - Используется для передачи разных событиев в в зависимости от сценария, как по клику по контейнеру карты с главной страницы при создании экземпляров карт, так при добавлении айтема в корзину и удаления айтема из корзины. Имеет тип `ICardActions`

3. ` blockName` - используется со значением по умолчанию, для динамического подставления в шаблон для поиска элемента внтури контейнера. Это значит, что если значение не передано будет подставлено значение из класса.

В классе используются геттеры/сеттеры для установки значений элементов карты.
Геттеры:
`title`, `price`, `category`, `description` возвращают текстовое значения карты одноименных элементов используя `.textContent`. Например `return this._title.textContent || '';` возвращет пустую строку, если текстовое значение элемента был не установлено.
`button` - возвращет HTMLElement, давая доступ к изменению значения активности кнопки. Изменние стэйта происходит в `index.ts` согласно статусу, находится ли айтем в корзине.
Сеттеры:
`title` - при вызове метода родителя `setText`, устанвливает текст заголовка.
`image` - при вызове метода родителя `setImage`, устанвливает изображение.
`price` - при вызове метода родителя `setPrice`, устанвливает цену айтема, добавляя кастомный текст и условие, для значений цены = `null`.
`category` - при вызове метода родителя `setCategory`, устанвливает текст соответствующий категории айтема.
`description` - при вызове метода родителя `setDescription`, устанвливает текст описания айтема.

Методы класса:
`setCategoryCard` - принимает строковое значение названия категории карты/айтема, используя унаследованный метод `addStyleClass`, добавляет указанному элементу соответсвующий класс стиля, взятый из ассоциативного массива.
////////////`Card`/

---

/`Component<T>`///////////

Абстрактный базовый класс дженерик, который помагает определить основные методы/характеристики для классов наследников и помогает в создании компонентов отображения, и последующего их рендера. Конструктор класса принимает один аргумент `container` типа `HTMLElement`
Данный класс расширяют следующие классы приложения:

- `Page`
- `Cart`
- `ShoppingCart`
- `Modal`
- `Success`
- `Form`
- `Order`

Класс реализует методы помогающие решить задачу отображения для классов наследников:
`setText` - метод помагает добавить название категории компонента. Принимает `HTMLElement`и значение типа `unknown`. Работает в связке с сеттером класса-наслденика.  
`setDisabled` - метод помагает установить атрибут `disabled` для элементов. Принимает любой `HTMLElement` и булевое значение `true/false`. Например используется для кнопки при добавлении айтема в корзину, сигнализируя пользователю, что айтем уже в корзине.  
`setImage` - метод помагает установить изображение установив значения атребутов src/alt для айтема компонента. Принимает `HTMLImageElement`и строки для src/alt. Работает в связке с сеттером класса-наслденика.
`setPrice` - метод помагает установить цену для айтема компонента. Принимает `HTMLSpanElement`и значение типа `unknown`. Работает в связке с сеттером класса-наслденика.  
`setCategory`- метод помагает добавить название категории компонента. Принимает `HTMLSpanElement`и значение типа `unknown`. Работает в связке с сеттером класса-наслденика.  
`setDescription` - метод помагает добавить описание компоненту. Принимает `HTMLSpanElement`и значение типа `unknown`. Работает в связке с сеттером класса-наслденика.
`addStyleClass` - метод добавляет стиль тэгам карточек, также используется при открытии модального окна. Реализует это добавлением класса стиля, название которого передано вторым аргументом. Первым аргументом метод принимает целевой элемент для добавления стиля.
`removeStyleClass` - метод удаляет стиль при закрытии модального окна. Реализует это удалением класса стиля, название которого передано вторым аргументом. Первым аргументом метод принимает целевой элемент для добавления стиля
`render`- главный метод класса, на вход принимает объект переданного дженерик типа, сам тип имеет использует утилитный тип `Partial`, который делает все свойства объекта переданного типа необязательными, возвращет HTML элемент.

////////////`Component`/

---

/`ShoppingCart`////////////
Class `ShoppingCart` расширяет Базовый Class `Component<T>`
и реализует отображение компонента одной карты/айтема.
В конструкторе класс принимает 2 аргумента:

1. `container` - аргумент обязательный для класса родителя, который принимает DOM-объект, как узел тега с разметкой корзины, получаемой из темплейта при помощи функции утилиты `cloneTemplate` из `utils.ts`. Используется для динамического поиска элементов внутри узла-контейнера и также классом родителем при рендере узла. Имеет тип `HTMLElement`.

2. `actions` - Используется для передачи события по клику кнопки "оформить" в корзине. Имеет тип `IShopCartActions`
   В классе используeтся сеттеры:

`items` - вычисляемое свойсто c условием наличия айтемов в корзине. Реализует замену узлов передаваемых в `index.ts`, где данные берутся из AppState, методом `render` класса `Card` преобразуются из типа `TCard` в `HTMLElement`. Аргументом является коллекцией отренднеренных айтемов типа `HTMLElement[]`, если коллекция пришла пустой, то создается с помощью метода-утилиты `createElement` тег-параграф с оповещением.

<!-- `selected` - метод реализует поведение кнопки "Оформить" в корзине при наличие/отсутствии добавленных в карзину айтемов. Использует метод класса родителя для добавления атрибута в разметке. Принимает аргументом массив добавленных айтемов. -->

`price` - Используя метод класса родителя сеттер устанавливает актуальную цену. Экземпляр класса принимает число в `index.ts`.

Класс реализует методы:
`setOrderIndex` - осуществляет нумерацию списка айтемов корзины
`setOrderButton` - метод реализует поведение кнопки "Оформить" в корзине при наличие/отсутствии добавленных в карзину айтемов. Использует метод класса родителя для добавления атрибута в разметке. Принимает аргументом число, длинну сета добавленных айтемов.

////////////`ShoppingCart`/

---

/`Modal`////////////
Class `Modal` расширяет Базовый Class `Component<T>`
и реализует отображение модального окна, служит контенером для корзины и превью одной карточки/айтема.

В конструкторе класс принимает 3 аргумента:

1. `container` - аргумент обязательный для класса родителя, который принимает DOM-объект как узел тега с разметкой модального окна, получаемой из темплейта при помощи функции утилиты `cloneTemplate` из `utils.ts`. Используется как для динамического поиска элементов внутри узла-контейнера, так и для установки WebAPI слушателя 'click' и также классом при рендере узла. Имеет тип `HTMLElement`.

2. `events` - аргумент экзмепляра класса `EventEmitter`, который описывает работу брокера событий, например: добавление, подписку, удаления событий и т.д. В данном классе используется для создания собый закрытия и открытия модального окна методом `emit` внутри одноименных методов. Имеет тип `IEvents`

В классе используeтся сеттер `content` внутри которго используется встроенный метод API браузера `replaceChildren`, для создания коллекции узлов, для последующего их рендера.

Класс реализует методы:

`close`, `open` - методы используются для закрытия/открытия модальнго окна.
Метод `open` вызваетcя внутри переопределенного метода `render` родителя, котоырй служит "оберткой".
Метод `close` удаляет имеюющимеся узлы переменной, вызывается при необходимости закрыть модальное окно.
Оба метода создают одноименные ивенты, на которые повешен слушатель в `index.ts`.
Оба метода используют методы родителя для изменения стилей.
`toggleCartBtn` - метод для блокировки кнопки при добавлении айтема из корзины. Принимает значени true/false, передоваемое из стэйта айтема в `index.ts`. Использует метод родителя для изменения атрибута элемента отображения.
`render` - метод который переопределяет метод родителя с целью изменения логики - вызовом открытия модального окна после рендера элементов. Возвращает полученый аргументом `container` типа `HTMLElement`.

////////////`Modal`/

---

/`Success`///////////
Class `Success` расширяет Базовый Class `Component<T>`
и реализует отображение компонента успешного офомрления заказа.
В конструкторе класс принимает 2 аргумента:

1. `container` - аргумент обязательный для класса родителя, который принимает DOM-объект окна подвтерждения заказа получаемой из темплейта при помощи функции утилиты `cloneTemplate` из `utils.ts`. Используется при рендере узла. Имеет тип `HTMLElement`.

2. `actions` - Используется для передачи события по клику кнопки "За новыми покупками" после оформления заказа, также передает в колбэк вызов закрытия модального окна. Имеет тип `TSuccessActions`.

В классе используeтся сеттер `totalPrice` для установки итоговой цены оформленных товаров. Используя метод класса родителя, сеттер присвоением устанивливает цену в элемент DOM.

////////////`Success`/

---

/`Form`///////////
Class `Form<K>` дженерик, расширяет базовый Class `Component<T>`,
является родителем классов `Order` и `Contacts`, в связке с которыми реализует отображение компонента оформления заказа.

В конструкторе класс принимает 2 аргумента:

1. `container` - аргумент обязательный для класса родителя, который принимает DOM-объект как узел тега с разметкой формы из классов наследников и передает в `super`. при помощи функции утилиты `cloneTemplate` из `utils.ts`. Используется как для динамического поиска элементов внутри узла-контейнера, так и для установки WebAPI слушателя 'click' и также классом при рендере узла. Имеет тип `HTMLElement`.

2. `events` - аргумент экзмепляра класса `EventEmitter`, который описывает работу брокера событий, например: добавление, подписку, удаления событий и т.д. В данном классе используется для создания собый закрытия и открытия модального окна методом `emit` внутри одноименных методов. Имеет тип `IEvents`

В классе используeтся сеттеры:
`valid` -
`errors` -
Класс реализует методы:
`onInputChange` - защищенный метод, для вызова внутри класса или его наследников, эмитит кастомный эвент из переданных в шаблон строк с названием переданного дженерика ключами и значением. Работает в связке с ивентом WebAPI для `input` внутири анонимного колбэка. Колбэк вызывается на каждое изменение поля формы.
`render` - ключевой метод для рендера формы. Метод оборачивает метод `render` родителя, передавая в в него общие данные для всех форм наследников `valid`, `errors`. Принимает утилитный тип `Partial<T>` c пересечнным передоваемым типом в класс Form, который делает все свойства объекта переданного необязательными, добавляя свойства типа из дженерика. Возвращет HTMLElement.

////////////`Form`/

---

/`Order`///////////

////////////`Order`/

---

/`Contacts`///////////

////////////`Contacts`/
